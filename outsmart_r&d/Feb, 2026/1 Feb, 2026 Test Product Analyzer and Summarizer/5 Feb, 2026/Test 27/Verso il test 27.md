Ho deciso di limitare l'output del nodo AI agent all'uso di solamente alcune tag HTML per mitigare il rischio di errori nella gestione delle tag.
Faró uso di due agenti per l'individuazione e la correzione delle tag. Dovrebbero, anche se lavorano un blocco alla volta, essere in grado comunque di riuscire a sistemare l'errore di chiusura/apertura di un tag anche qualora essa sia stata aperta in un blocco e chiusa nel successivo. 
    Per affrontare questo punto vedo necessario anche qui mitigare l'evento di tale eventualitá istruendo l'agente nella direttiva di formattazione a comportarsi in modo elastico quando ha aperto una tag, e non chiudere prematuramente il blocco prima di chiudere la tag.
    Il rischio maggiore é che venga appunto aperta una tag in un blocco che poi viene chiusa nel blocco successivo visto che chiedo all'agente di chiudere un blocco dopo una porzione importante di testo, e mi viene in mente che se l'agente sta scrivendo dei paragrafi in un blockquote potremmo rischiare che rispetti l'istruzione alla lettera e vada a continuare il block quote nel blocco appartenente all'item dell'array successivo, effettivamente quindi scrivendo in quello che io gestisco come nuovo messaggio.

    Intanto ho implementato giá la logica Split in batches per fare si che di base non si vada avanti a mandare frammenti prima che uno in particolare non é stato risolto se da errori al nodo di invio; per fare ció ho inserito un nodo split in batches che comincia il loop proprio dal nodo di invio a telegram, che se riceve errore passa a un check per vedere se nel messaggio di errore conteniamo la parola tag, se non é cosí mi viene segnalato l'errore a me personalmente e mi viene anche fatto errare il workflow, se invece é per il tag il problema andiamo prima ad un agente e poi all'altro, dei quali devo ancora definire i system prompt; dal secondo di essi poi andiamo ad un nodo di invio a Telegram, che se anch'esso erra, mi viene segnalato a me personalmente e viene sollevato l'errore nel workflwo, altrimenti se lui--o il primo nodo di invio--non da errori ed ha successo, allora si salva il message_id per la funzione di pulizia e poi si finisce l'esecuzione